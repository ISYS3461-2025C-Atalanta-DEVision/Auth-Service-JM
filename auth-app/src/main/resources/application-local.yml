# Auth Service - Local Development Configuration
# Activate with: --spring.profiles.active=local

server:
  port: 8081

spring:
  # Remove Kafka exclusion for local development
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
      - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

  # MongoDB and Redis Configuration
  data:
    mongodb:
      uri: mongodb+srv://db_user:strongpassword@cluster0.hsoi5dv.mongodb.net/auth_db?retryWrites=true&w=majority
      database: auth_db
    redis:
      host: localhost
      port: 6379
      password: ""
      ssl:
        enabled: false

  # Kafka Configuration (A.3.2) - Use external listener port 9094
  kafka:
    bootstrap-servers: localhost:9094

  # Mail Configuration (disable for local)
  mail:
    host: localhost
    port: 1025

  # OAuth2 Configuration
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID:your-client-id}
            client-secret: ${GOOGLE_CLIENT_SECRET:your-client-secret}
            scope:
              - email
              - profile
              - openid
            redirect-uri: "http://localhost:8081/login/oauth2/code/google"

# Eureka Configuration for local development
eureka:
  client:
    enabled: true
    service-url:
      defaultZone: http://eureka:eureka-secret-2024@localhost:8761/eureka/
    register-with-eureka: true
    fetch-registry: true
  instance:
    prefer-ip-address: true
    instance-id: ${spring.application.name}:${server.port}

# Internal API Key
internal:
  api-key: local-dev-api-key
  api-key-validation:
    enabled: false

# JWE Configuration (must match API Gateway jwt.secret)
jwe:
  secret: devision-jm-auth-service-secret-key-2024-must-be-at-least-256-bits-long-for-hs256
  access-token-expiration: 900000
  refresh-token-expiration: 604800000
  issuer: devision-jm-auth-service

# Application Configuration
app:
  name: JobMatch
  frontend-url: http://localhost:5173
  from-email: noreply@jobmatch.local

# Logging
logging:
  level:
    com.devision.jm.auth: DEBUG
    org.springframework.kafka: DEBUG
